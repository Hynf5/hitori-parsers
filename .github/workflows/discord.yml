name: Discord Â· Commit Notification

on:
  push:
    branches:
      - '**'

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Get short commit hash
        id: commit
        run: echo "short=${GITHUB_SHA::10}" >> $GITHUB_OUTPUT

      - name: Send commit notification to Discord
        uses: tsickert/discord-webhook@v7.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}

          embed-title: "ğŸ§© Commit Update: ${{ github.event.repository.name }}"
          embed-url: https://github.com/${{ github.repository }}/commit/${{ github.sha }}
          #embed-thumbnail-url: "${{ secrets.PARSERS_THUMBNAIL_URL }}"

          # Identitas committer
          #embed-author-name: ${{ github.actor }}
          #embed-author-icon-url: https://github.com/${{ github.actor }}.png

          embed-description: |
            ğŸ“ **Repo:** `${{ github.repository }}`
            ğŸŒ¿ **Branch:** `${{ github.ref_name }}`
            ğŸ”– **Commit:** [`${{ steps.commit.outputs.short }}`](https://github.com/${{ github.repository }}/commit/${{ github.sha }})

    

          embed-color: 15105570
          embed-footer-icon-url: https://github.com/${{ github.actor }}.png
          embed-footer-text: ${{ github.actor }}
          embed-timestamp: ${{ github.event.head_commit.timestamp }}
      # ===============================
      # 3ï¸âƒ£ DELAY
      # ===============================
      - name: Wait 1 second
        if: ${{ steps.release.outputs.prerelease == 'false' }}
        run: sleep 0.5

      # ===============================
      # 4ï¸âƒ£ DOWNLOAD EMBED
      # ===============================
      - name: Send Download Hitori (Embed)
        uses: tsickert/discord-webhook@v7.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_RELEASE_WEBHOOK }}

          embed-title: "ğŸ“ Message:"
          embed-description: |
            > ${{ github.event.head_commit.message }}
          embed-color: 15105570
