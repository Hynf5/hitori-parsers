name: Discord Â· Commit Notification

on:
  push:
    branches:
      - '**'

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Get short commit hash
        id: commit
        run: echo "short=${GITHUB_SHA::10}" >> $GITHUB_OUTPUT

      # ===============================
      # 1ï¸âƒ£ EMBED INFO COMMIT
      # ===============================
      - name: Send Commit Info (Embed)
        uses: tsickert/discord-webhook@v7.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}

          embed-title: "ðŸ§© New Commit: ${{ github.event.repository.name }}"
          embed-url: https://github.com/${{ github.repository }}/commit/${{ github.sha }}
          embed-thumbnail-url: "${{ secrets.PARSERS_THUMBNAIL_URL }}"
          

          embed-description: |
            ðŸ“ **Repo:** `${{ github.repository }}`
            ðŸŒ¿ **Branch:** `${{ github.ref_name }}`
            ðŸ”– **Commit:** [`${{ steps.commit.outputs.short }}`](https://github.com/${{ github.repository }}/commit/${{ github.sha }})

          embed-color: 15105570
          embed-footer-icon-url: https://github.com/${{ github.actor }}.png
          embed-footer-text: ${{ github.actor }}
          embed-timestamp: ${{ github.event.head_commit.timestamp }}

      # ===============================
      # 2ï¸âƒ£ EMBED MESSAGE COMMIT
      # ===============================
      - name: Send Commit Message (Embed)
        uses: tsickert/discord-webhook@v7.0.0
        with:
          webhook-url: ${{ secrets.DISCORD_WEBHOOK_URL }}

          embed-title: "ðŸ“ Message"
          embed-description: |
            
            > ${{ github.event.head_commit.message }}
            
          embed-color: 15105570
          embed-footer-icon-url: "https://github.com/${{ github.actor }}.png"
          embed-footer-text: "${{ github.actor }} | Commit â€¢ ${{ steps.commit.outputs.short }}"

